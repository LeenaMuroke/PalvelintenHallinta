## x) Lue ja tiivistä (Tässä x-alakohdassa pelkkä luku / katselu / kuuntelu riittää, ei tarvitse tehdä testejä tietokoneella. Muutama ranskalainen viiva per artikkeli riittää)

- Karvinen 2020: Command Line Basics Revisited
    - tekstiä

- Karvinen 2018: Salt States – I Want My Computers Like This

- Karvinen 2006: Raportin kirjoittaminen

## a) Tee Saltilla tiedosto yksittäisellä komentorivillä (state.single)

Aluksi päivitin paketit `sudo apt-get update`. Salt oli jo tunnilla asennettu valmiiksi komennolla `sudo apt-get install salt-master salt-minion`.

Kokeilin Saltin toimivuutta kysymällä kuka olen komennolla `sudo salt-call --local cmd.run whoami`. Vastaukseksi sain pääkäyttäjän root. Eli yhteys orjiin on onnistunut.



## b) Tee saltille idempotentti, infra koodina hei maailma 

<img width="437" alt="image" src="https://user-images.githubusercontent.com/111494018/198891807-b483de3a-69be-445a-ac49-a18b0cbd18bb.png">

Loin kansion komennolla `sudo mkdir -p /srv/salt`. Toin microeditorin automaattiseen käyttöön komennolla `export EDITOR=micro`, jotta pääsen sillä muokkaamaan tulevaa hello-tilaa.

Aloitin hello-tilan tekemisen komennolla `sudoedit /srv/salt/hello.sls`. Hello-sls tiedosto oli tyhjä. Kirjoitin sinne seuraavat tiedot:
<img width="278" alt="image" src="https://user-images.githubusercontent.com/111494018/198892351-8b9b3296-6163-433d-af3d-99cb6901ec7b.png">

Kävin muokkaamassa äskeiseen kohdassa mainittua tiedostoa "helloleena.txt" komennolla `sudoedit /srv/salt/helloleena.txt`. Tiedosto oli tyhjä ja kirjoitin sinne tekstiä "Tämä on harjoitus". 

Tämän jälkeen laitoin komennon muutoksista orjille komennolla `sudo salt-call state.apply hello`. Sain seuraavanlaiset tiedot:
<img width="452" alt="image" src="https://user-images.githubusercontent.com/111494018/198892561-12bdbd06-e133-4dfc-b8eb-a8e2666352b5.png">

Eli funktiona on käytetty file.managed funktiota. Tulos oli onnistunut. Tiedosto "helloleena.txt" on päivitetty ohjeiden mukaisesti. 

Suoritin saman komennon orjille uudestaan `sudo salt-call state.apply hello`. Nyt sain odotetusti eri tulokset, sillä mitään päivitettävää ei pitäisikään olla. Päivitykset ja tiedosto ovat ajan tasalla edellisen käskyn jäljiltä. 

<img width="454" alt="image" src="https://user-images.githubusercontent.com/111494018/198892657-fdfb9475-e1b4-4bc9-ac35-c86df195a1f8.png">


## d) Kerää tietoa koneesta saltin avulla (grains.items)

Lähin keräämään tietoja koneesta komennolla `sudo salt-call --local grains.items`. Tästä avautui pitkä lista, joka sisältää kaikki koneen tiedot. 

Kokeilin myös jatkaa komentoa `sudo salt-call --local grains.items sys.state_doc`, mutta tämä näytti saman listauksen samassa muodossa. 

Tallensin tiedostot tiedostona koneelle komennolla `sudo salt-call --local sys.state_doc > state_doc`. Tämä tallentaa aiemmassa listauksessa olevat tiedot koneelle tiedostoon nimeltä "state_doc". Tarkistin vielä `ls` komennolla, että tiedosto löytyy. 
<img width="505" alt="image" src="https://user-images.githubusercontent.com/111494018/198893440-447d2ed1-fa53-4055-b887-6dd9c4363cb7.png">

Nyt voi tarkastella normaalin tiedoston tavoin, esimerkiksi Micro editorilla. 


## e) Kokeile jotain toista tilaa kuin file.managed. Tärkeitä ovat pkg.installed, file.managed, service.running, file.symlink, user.present, group.present. Ohjeita saa esim "sudo salt-call --local sys.state_doc pkg.installed|less"
